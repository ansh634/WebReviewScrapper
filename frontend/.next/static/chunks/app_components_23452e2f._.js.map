{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Desktop/WebReviewScrapper/frontend/app/components/topReviews.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\ninterface Review {\r\n    Rating: string;\r\n    Title: string;\r\n    Author: string;\r\n    Date: string;\r\n    Review: string;\r\n}\r\n\r\ninterface GeminiPromptProps {\r\n    reviews: Review[] | null;\r\n}\r\n\r\nexport default function TopReviews({ reviews }: GeminiPromptProps) {\r\n    const [overview, setOverview] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [speaking, setSpeaking] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const speechSynthRef = useRef<SpeechSynthesisUtterance | null>(null);\r\n\r\n    const handleGenerateSummary = async () => {\r\n        if (!reviews || reviews.length === 0) {\r\n            alert(\"No reviews available to summarize.\");\r\n            return;\r\n        }\r\n\r\n        // Take top 5 reviews\r\n        const topReviews = reviews.slice(0, 5);\r\n        \r\n        setLoading(true);\r\n        setOverview('');\r\n        setError(null);\r\n\r\n        try {\r\n            const res = await axios.post('http://127.0.0.1:5001/generate-gemini-overview', { \r\n                reviews: topReviews \r\n            });\r\n            setOverview(res.data.overview || \"No overview received.\");\r\n        } catch (error) {\r\n            console.error(\"Error fetching overview:\", error);\r\n            setError(\"Error: Unable to fetch overview.\");\r\n        }\r\n\r\n        setLoading(false);\r\n    };\r\n\r\n    const speakText = () => {\r\n        if (!overview) {\r\n            alert(\"No summary available to speak.\");\r\n            return;\r\n        }\r\n\r\n        // Stop any ongoing speech\r\n        if (speaking) {\r\n            window.speechSynthesis.cancel();\r\n            setSpeaking(false);\r\n            return;\r\n        }\r\n\r\n        // Create a new utterance\r\n        const utterance = new SpeechSynthesisUtterance(overview);\r\n        speechSynthRef.current = utterance;\r\n        \r\n        // Configure speech settings\r\n        utterance.rate = 1;\r\n        utterance.pitch = 1;\r\n        utterance.volume = 1;    \r\n        utterance.lang = \"hi-GB\";    \r\n        // Handle speech events\r\n        utterance.onstart = () => setSpeaking(true);\r\n        utterance.onend = () => setSpeaking(false);\r\n        utterance.onerror = () => {\r\n            setSpeaking(false);\r\n            // setError(\"Error occurred while playing speech.\");\r\n        };\r\n\r\n        // Start speaking\r\n        window.speechSynthesis.speak(utterance);\r\n    };\r\n\r\n    return (\r\n        <div className=\"mt-6\">\r\n            <button\r\n                className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition duration-200 w-full\"\r\n                onClick={handleGenerateSummary}\r\n                disabled={loading || !reviews || reviews.length === 0}\r\n            >\r\n                {loading ? \"Generating...\" : \"Summary of Top Reviews\"}\r\n            </button>\r\n\r\n            {error && (\r\n                <div className=\"p-3 bg-red-100 border border-red-300 rounded text-red-700 mt-4\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            {overview && (\r\n                <div className=\"p-4 border rounded bg-gray-50 mt-4\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                        <h3 className=\"font-semibold\">Summary:</h3>\r\n                        <button \r\n                            onClick={speakText}\r\n                            className=\"flex items-center space-x-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm\"\r\n                        >\r\n                            <span>{speaking ? \"Stop\" : \"Listen\"}</span>\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                {speaking ? (\r\n                                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z\" clipRule=\"evenodd\" />\r\n                                ) : (\r\n                                    <path fillRule=\"evenodd\" d=\"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z\" clipRule=\"evenodd\" />\r\n                                )}\r\n                            </svg>\r\n                        </button>\r\n                    </div>\r\n                    <p className=\"text-gray-800\">{overview}</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAiBe,SAAS,WAAW,EAAE,OAAO,EAAqB;;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,iBAAiB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAmC;IAE/D,MAAM,wBAAwB;QAC1B,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,GAAG;YAClC,MAAM;YACN;QACJ;QAEA,qBAAqB;QACrB,MAAM,aAAa,QAAQ,KAAK,CAAC,GAAG;QAEpC,WAAW;QACX,YAAY;QACZ,SAAS;QAET,IAAI;YACA,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,kDAAkD;gBAC3E,SAAS;YACb;YACA,YAAY,IAAI,IAAI,CAAC,QAAQ,IAAI;QACrC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,SAAS;QACb;QAEA,WAAW;IACf;IAEA,MAAM,YAAY;QACd,IAAI,CAAC,UAAU;YACX,MAAM;YACN;QACJ;QAEA,0BAA0B;QAC1B,IAAI,UAAU;YACV,OAAO,eAAe,CAAC,MAAM;YAC7B,YAAY;YACZ;QACJ;QAEA,yBAAyB;QACzB,MAAM,YAAY,IAAI,yBAAyB;QAC/C,eAAe,OAAO,GAAG;QAEzB,4BAA4B;QAC5B,UAAU,IAAI,GAAG;QACjB,UAAU,KAAK,GAAG;QAClB,UAAU,MAAM,GAAG;QACnB,UAAU,IAAI,GAAG;QACjB,uBAAuB;QACvB,UAAU,OAAO,GAAG,IAAM,YAAY;QACtC,UAAU,KAAK,GAAG,IAAM,YAAY;QACpC,UAAU,OAAO,GAAG;YAChB,YAAY;QACZ,oDAAoD;QACxD;QAEA,iBAAiB;QACjB,OAAO,eAAe,CAAC,KAAK,CAAC;IACjC;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBACG,WAAU;gBACV,SAAS;gBACT,UAAU,WAAW,CAAC,WAAW,QAAQ,MAAM,KAAK;0BAEnD,UAAU,kBAAkB;;;;;;YAGhC,uBACG,6LAAC;gBAAI,WAAU;0BACV;;;;;;YAIR,0BACG,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,6LAAC;gCACG,SAAS;gCACT,WAAU;;kDAEV,6LAAC;kDAAM,WAAW,SAAS;;;;;;kDAC3B,6LAAC;wCAAI,OAAM;wCAA6B,WAAU;wCAAU,SAAQ;wCAAY,MAAK;kDAChF,yBACG,6LAAC;4CAAK,UAAS;4CAAU,GAAE;4CAAmG,UAAS;;;;;iEAEvI,6LAAC;4CAAK,UAAS;4CAAU,GAAE;4CAAgd,UAAS;;;;;;;;;;;;;;;;;;;;;;;kCAKpgB,6LAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;;;;;;;AAKlD;GA1GwB;KAAA","debugId":null}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hp/OneDrive/Desktop/WebReviewScrapper/frontend/app/components/webscrapper.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport axios from 'axios';\r\nimport GeminiPrompt from './gemini';\r\nimport TopReviews from './topReviews';\r\n\r\nexport default function AmazonReviewScraper() {\r\n    const [url, setUrl] = useState('');\r\n    const [reviews, setReviews] = useState<ReviewsData | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [sortBy, setSortBy] = useState('Date');\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [selectedReviews, setSelectedReviews] = useState<Review[]>([]);\r\n\r\n    interface Review {\r\n        Rating: string;\r\n        Title: string;\r\n        Author: string;\r\n        Date: string;\r\n        Review: string;\r\n    }\r\n\r\n    interface ReviewsData {\r\n        Product: string;\r\n        Rating: string;\r\n        Reviews: Review[];\r\n    }\r\n\r\n    const isValidAmazonUrl = (url: string) => {\r\n        const amazonUrlPattern = /^(https?:\\/\\/)?(www\\.)?amazon\\.[a-z]{2,3}\\/.*$/;\r\n        return amazonUrlPattern.test(url);\r\n    };\r\n\r\n    const fetchReviews = async () => {\r\n        if (!isValidAmazonUrl(url)) {\r\n            alert('Invalid Amazon URL');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await axios.post('https://debuggingmortals-backend-1.onrender.com/scrape-amazon', { url });\r\n            setReviews(response.data);\r\n        } catch (error) {\r\n            console.error(\"Error fetching reviews:\", error);\r\n            setError('Error fetching reviews');\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const sortedReviews = () => {\r\n        if (!reviews) return [];\r\n        return [...reviews.Reviews].sort((a, b) => {\r\n            if (sortBy === 'Rating') return parseFloat(b.Rating) - parseFloat(a.Rating);\r\n            if (sortBy === 'Date') return new Date(b.Date).getTime() - new Date(a.Date).getTime();\r\n            return 0;\r\n        });\r\n    };\r\n\r\n    const handleReviewClick = (review: Review) => {\r\n        setSelectedReviews((prevReviews) => {\r\n            if (prevReviews.includes(review)) {\r\n                return prevReviews.filter((r) => r !== review);\r\n            } else {\r\n                return [...prevReviews, review].slice(0, 5);\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto p-4 flex gap-4 flex-col items-center mt-10\">\r\n            <h1 className=\"text-4xl font-bold mb-4\">Amazon Product Review Scraper</h1>\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Enter Amazon Product URL\"\r\n                className=\"w-full p-2 border rounded-full mb-2\"\r\n                value={url}\r\n                onChange={(e) => setUrl(e.target.value)}\r\n            />\r\n            <button\r\n                onClick={fetchReviews}\r\n                className=\"text-white px-4 py-2 rounded-full mb-4 bg-black/10 border border-white-100 hover:bg-white/10 hover:bg-opacity-20 transition duration-200\"\r\n                disabled={loading}\r\n            >\r\n                {loading ? 'Fetching...' : 'Scrape Reviews'}\r\n            </button>\r\n\r\n            {error && <p className=\"text-red-500\">{error}</p>}\r\n\r\n            {reviews && (\r\n                <div>\r\n                    <h2 className=\"text-lg font-semibold\">Product: {reviews.Product}</h2>\r\n                    <p className=\"mb-2\">Overall Rating: {reviews.Rating}</p>\r\n\r\n                    <label>Sort by: </label>\r\n                    <select\r\n                        value={sortBy}\r\n                        onChange={(e) => setSortBy(e.target.value)}\r\n                        className=\"border p-1 mb-4 \"\r\n                    >\r\n                        <option value=\"Date\">Date</option>\r\n                        <option value=\"Rating\">Rating</option>\r\n                    </select>\r\n\r\n                    {sortedReviews().map((review, index) => (\r\n                        <div\r\n                            key={index}\r\n                            className={`border-none p-2 my-2 bg-white/10 rounded cursor-pointer ${selectedReviews.includes(review) ? 'bg-blue-100' : ''}`}\r\n                            onClick={() => handleReviewClick(review)}\r\n                        >\r\n                            <h3 className=\"font-semibold\">⭐ {review.Rating} - {review.Title}</h3>\r\n                            <p className=\"text-sm\">By {review.Author} on {review.Date}</p>\r\n                            <p>{review.Review}</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n            {reviews && <TopReviews reviews={sortedReviews()} />}\r\n            <div className=\"h-4\" />\r\n            <div className='flex items-center'>\r\n            {/* <GeminiPrompt selectedReviews={selectedReviews} /> */}\r\n            </div>\r\n            \r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 441, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}